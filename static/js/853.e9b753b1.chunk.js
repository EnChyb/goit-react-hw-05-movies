"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[853],{243:function(t,e,r){function n(t,e,r,n,u,a,s){try{var c=t[a](s),o=c.value}catch(i){return void r(i)}c.done?e(o):Promise.resolve(o).then(n,u)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(u,a){var s=t.apply(e,r);function c(t){n(s,u,a,c,o,"next",t)}function o(t){n(s,u,a,c,o,"throw",t)}c(void 0)}))}}r.d(e,{jf:function(){return m},hG:function(){return h},Cm:function(){return d},do:function(){return c},pS:function(){return o},qF:function(){return f},Jk:function(){return p}});var a=r(757),s=r.n(a),c="https://picsum.photos/200/300",o="https://image.tmdb.org/t/p/w300",i={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmZWY5N2Y4MmQ4ZDQ5MDg1Y2UyMzlmOWIzZTNlMmZhZCIsInN1YiI6IjY1ZTg2ZjRiYTFhOWJhMDE4NWJmMmQwMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.N52ZU8Yy9IzrON1WX2UYvsIciDECC_sAUCcmjx29Yxs"}},l=function(){var t=u(s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,i);case 2:return r=t.sent,console.log(r),t.next=6,r.json();case 6:if(n=t.sent,console.log(n),r.ok){t.next=10;break}throw new Error("Failed to fetch data");case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=u(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.themoviedb.org/3/trending/all/day",t.next=3,l("https://api.themoviedb.org/3/trending/all/day");case 3:return e=t.sent,t.abrupt("return",e.results);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=u(s().mark((function t(e,r){var n,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.themoviedb.org/3/search/movie?query=".concat(e,"&page=").concat(r),t.next=3,l(n);case 3:return u=t.sent,console.log(u),t.abrupt("return",u);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),h=function(){var t=u(s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="https://api.themoviedb.org/3/movie/".concat(e),t.next=3,l(r);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=u(s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="https://api.themoviedb.org/3/movie/".concat(e,"/credits"),t.next=3,l(r);case 3:return n=t.sent,console.log(n),t.abrupt("return",n.cast);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=u(s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="https://api.themoviedb.org/3/movie/".concat(e,"/reviews"),t.next=3,l(r);case 3:return n=t.sent,console.log(n),t.abrupt("return",n.results);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},853:function(t,e,r){r.r(e),r.d(e,{default:function(){return g}});var n=r(439),u=r(791),a=r(243),s=r(87),c="SearchInput_form__5l7m6",o="SearchInput_input__pvo3q",i="SearchInput_button__a2oUc",l=r(184),p=function(t){var e=t.onSubmit;return(0,l.jsxs)("form",{className:c,onSubmit:e,children:[(0,l.jsx)("input",{className:o,type:"text",name:"query"}),(0,l.jsx)("button",{className:i,type:"submit",children:"Search"})]})},f=r(689),h="SearchResults_results__avj5U",m="SearchResults_result__rgnT+",d="SearchResults_link__MuWFg",v=function(t){var e=t.queryResults,r=(0,f.TH)();return(0,l.jsx)("ul",{className:h,children:e.map((function(t){var e=t.id,n=t.poster_path,u=t.title,c=t.name;return(0,l.jsx)("li",{className:m,children:(0,l.jsxs)(s.rU,{className:d,to:"/movies/".concat(e),state:{from:r},children:[(0,l.jsx)("img",{src:n?"".concat(a.pS).concat(n):a.do,alt:"Poster of film: ".concat(u||c),width:"200"}),(0,l.jsx)("p",{children:u||c})]})},e)}))})},x="LoadMore_load__ZTs3I",b=function(t){var e=t.disabled,r=t.onClick;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{className:x,disabled:e,onClick:r,children:e?"End of results":"Load more"})})},g=function(){var t=(0,s.lr)(),e=(0,n.Z)(t,2),r=e[0],c=e[1],o=r.get("query"),i=(0,u.useState)([]),f=(0,n.Z)(i,2),h=f[0],m=f[1];console.log(h);var d=(0,u.useState)(1),x=(0,n.Z)(d,2),g=x[0],_=x[1],y=(0,u.useState)(!0),w=(0,n.Z)(y,2),j=w[0],k=w[1],I=(0,u.useState)(0),S=(0,n.Z)(I,2),Z=S[0],N=S[1];(0,u.useEffect)((function(){o&&(0,a.qF)(o,g).then((function(t){t.results.length<20?(m(t.results),k(!0)):1===g?(k(!1),m(t.results),N((function(){return t.total_pages}))):m(t.results)})).catch((function(t){return console.error(t)}))}),[o,g]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{onSubmit:function(t){t.preventDefault();var e=t.currentTarget;c({query:e.elements.query.value}),_(1),e.reset()}}),(0,l.jsx)(v,{queryResults:h}),0!==Z&&(0,l.jsx)(b,{disabled:j,onClick:function(){_((function(t){return t+1})),N((function(t){return t-1}))}})]})}}}]);
//# sourceMappingURL=853.e9b753b1.chunk.js.map